<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Bonanza ‚Ä¢ Headquarters</title>
<style>
  :root{ --copper:#a8744f; --copper-2:#c08b5c; --ink:#0b0e13; --ok:#17c964; --err:#ff6b6b; }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
    color:#e9d5c1; background:radial-gradient(1200px 700px at 50% -10%, #182235 0%, #0b0e13 60%, #07090c 100%);
  }
  .wrap{ min-height:100%; display:grid; place-items:center; padding:28px; }
  .card{
    width:min(940px,96vw);
    background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));
    border:1px solid rgba(192,139,92,.20);
    border-radius:16px; backdrop-filter:blur(6px);
    box-shadow:0 20px 60px rgba(0,0,0,.55);
    display:grid; grid-template-columns:1.1fr 1fr; gap:0;
  }
  @media (max-width:820px){ .card{grid-template-columns:1fr} }
  .left,.right{padding:22px 24px}
  .left{border-right:1px solid rgba(192,139,92,.16);background:linear-gradient(180deg,#112034,#0f1727);border-top-left-radius:16px;border-bottom-left-radius:16px}
  @media (max-width:820px){.left{border-right:0;border-bottom:1px solid rgba(192,139,92,.16);border-radius:16px 16px 0 0}}
  .brand{display:flex; align-items:center; gap:12px; margin-bottom:10px;}
  .brand img{ width:88px; height:88px; border-radius:50%; border:1px solid rgba(168,116,79,.55);
    box-shadow:0 0 16px rgba(168,116,79,.25) inset, 0 6px 18px rgba(0,0,0,.45); background:#0d0d0d; }
  h1{font-size:1.35rem;margin:0;line-height:1.2}
  .sub{opacity:.85;font-size:.95rem; display:flex; align-items:center; gap:8px;}
  .flag{width:18px; height:12px; border-radius:2px; box-shadow:0 0 0 1px rgba(0,0,0,.35); flex:0 0 auto;}
  .bullets{margin:12px 0 4px 0; padding:0 0 0 18px}
  .bullets li{margin:6px 0; color:#ffddae}
  .tiny{font-size:.85rem; opacity:.9}
  .right{background:linear-gradient(180deg,#0f1522,#0d1420)}
  label{display:block; font-weight:700; margin:6px 0 6px}
  .row{position:relative}
  input[type="password"],input[type="text"]{
    width:100%; height:46px; padding:0 44px 0 12px; border-radius:10px;
    border:1px solid #334; outline:0; background:#0f1320; color:#ffddae;
    box-shadow:0 0 0 3px transparent; transition:.15s;
  }
  input::placeholder{color:rgba(255,221,174,.45)}
  input:focus{border-color:var(--copper); box-shadow:0 0 0 3px rgba(168,116,79,.18)}
  .eye{position:absolute; right:10px; top:50%; transform:translateY(-50%); width:28px;height:28px;border-radius:8px; display:grid; place-items:center; color:rgba(168,116,79,.65); cursor:pointer; user-select:none;}
  .eye:hover{background:rgba(168,116,79,.12)}
  .caps{margin-top:6px; color:#ffcc66; font-size:.85rem; display:none}
  .check{display:flex; align-items:center; gap:8px; margin:10px 0 14px; user-select:none; cursor:pointer;}
  .check input{width:18px;height:18px}
  .actions{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
  .btn{appearance:none; border:0; cursor:pointer; padding:10px 16px; border-radius:10px; font-weight:800; background:linear-gradient(180deg,var(--copper-2),var(--copper)); color:#0a0a0a; box-shadow:0 8px 18px rgba(0,0,0,.35), inset 0 0 0 1px rgba(0,0,0,.1); transition:transform .06s ease, filter .15s ease, box-shadow .15s ease;}
  .btn:active{transform:translateY(1px)}
  .btn.secondary{background:#121a29; color:rgba(255,221,174,.8); border:1px solid rgba(168,116,79,.25);}
  .state{min-height:22px; margin-top:10px; font-size:.9rem}
  .state.err{color:var(--err)} .state.ok{color:var(--ok)}
  .shake{animation:shake .26s linear}
  @keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-6px)}75%{transform:translateX(6px)}}
  .support{margin-top:16px; font-size:.85rem; opacity:.85}
  .support a{color:#ffddae}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card">
      <section class="left">
        <div class="brand">
          <img src="/images/bonanza-logo.PNG" alt="Bonanza">
          <div>
            <h1>Bonanza Transportation</h1>
            <div class="sub">
              Headquarters ‚Äî Internal Access
              <svg class="flag" viewBox="0 0 19 10" xmlns="http://www.w3.org/2000/svg" aria-label="United States flag">
                <rect width="19" height="10" fill="#b22234"/>
                <g fill="#fff">
                  <rect y="1" width="19" height="1"/>
                  <rect y="3" width="19" height="1"/>
                  <rect y="5" width="19" height="1"/>
                  <rect y="7" width="19" height="1"/>
                  <rect y="9" width="19" height="1"/>
                </g>
                <rect width="7.6" height="5.6" fill="#3c3b6e"/>
              </svg>
            </div>
          </div>
        </div>

        <ul class="bullets">
          <li>Real-time vehicle schedule</li>
          <li>Seasonal rules and SLC exception</li>
          <li>Secure Stripe payment reading</li>
          <li>Blocking and instant availability</li>
        </ul>

        <div class="support tiny">
          Support: <strong>(786) 683-5128</strong> ‚Äî
          <a href="mailto:bonanzatransportation1@outlook.com">bonanzatransportation1@outlook.com</a>
        </div>
      </section>

      <section class="right">
        <form id="form" autocomplete="off">
          <label for="user">Username</label>
          <input id="user" name="username" type="text" placeholder="Username" autocomplete="username" autofocus>

          <label for="pass">Password</label>
          <div class="row">
            <input id="pass" name="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" inputmode="text" aria-describedby="capsMsg">
            <div class="eye" id="eye" title="Show / Hide">üëÅÔ∏è</div>
          </div>
          <div id="capsMsg" class="caps">Caps-Lock is ON</div>

          <label class="check"><input type="checkbox" id="remember"> Remember me on this device</label>

          <div class="actions">
            <button type="submit" class="btn" id="enterBtn">Enter</button>
            <a class="btn secondary" href="/">Back to site</a>
          </div>

          <div id="state" class="state" role="status" aria-live="polite"></div>
        </form>
      </section>
    </div>
  </div>

<script>
/* Credenciales v√°lidas */
const VALID_USER = "dinastia";          // acepta Dinastia/dinastia/DINASTIA
const VALID_PASS = "supersecreto123";
const DASH_URL   = "/admin.html";

const userEl   = document.getElementById("user");
const passEl   = document.getElementById("pass");
const eye      = document.getElementById("eye");
const caps     = document.getElementById("capsMsg");
const form     = document.getElementById("form");
const state    = document.getElementById("state");
const card     = document.getElementById("card");
const remember = document.getElementById("remember");
const btn      = document.getElementById("enterBtn");

function setState(msg, ok){
  state.textContent = msg || "";
  state.className = "state " + (ok===true ? "ok" : ok===false ? "err" : "");
}
function loading(on){
  btn.disabled = !!on;
  btn.textContent = on ? "Signing in‚Ä¶" : "Enter";
}

/* Auto-login si ya hay ADMIN_KEY (lo que usa admin.html) */
try{
  if(localStorage.getItem("ADMIN_KEY")){
    location.replace(DASH_URL);
  }
}catch{}

/* Mostrar/ocultar password */
eye.addEventListener("click", ()=>{
  passEl.type = (passEl.type === "password") ? "text" : "password";
});

/* Indicador de CapsLock */
passEl.addEventListener("keydown", e=>{
  caps.style.display = e.getModifierState && e.getModifierState("CapsLock") ? "block" : "none";
});
passEl.addEventListener("keyup", e=>{
  caps.style.display = e.getModifierState && e.getModifierState("CapsLock") ? "block" : "none";
});

/* Submit */
form.addEventListener("submit", async (e)=>{
  e.preventDefault();
  const u = (userEl.value || "").trim().toLowerCase();
  const p = (passEl.value || "").trim();

  if(!u){ userEl.focus(); setState("Please enter your username.", false); return; }
  if(!p){ passEl.focus(); setState("Please enter your password.", false); return; }

  loading(true); setState("");
  await new Promise(r=>setTimeout(r, 250));

  const ok = (u === VALID_USER && p === VALID_PASS);

  loading(false);
  if(!ok){
    card.classList.remove("shake"); void card.offsetWidth; card.classList.add("shake");
    setState("Invalid credentials. This attempt has been logged and may be reviewed. Your IP may be recorded.", false);
    passEl.select();
    return;
  }

  /* Guarda la clave EXACTA que requiere el backend para /api/admin (evita el loop) */
  try {
    localStorage.setItem("ADMIN_KEY", VALID_PASS);   // "supersecreto123"
    localStorage.setItem("bonanza_admin_ok", "1");   // compatibilidad
    localStorage.setItem("ADMIN_USER", "Dinastia");  // opcional
  } catch {}

  setState("Access granted. Redirecting‚Ä¶", true);
  location.replace(DASH_URL);
});
</script>
</body>
</html>
