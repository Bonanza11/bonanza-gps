<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bonanza Transportation</title>

  <link rel="icon" href="/images/bonanza-logo.png" />
  <meta name="color-scheme" content="dark" />
  <meta name="theme-color" content="#0a0c0f" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#000000"   media="(prefers-color-scheme: light)">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <link rel="stylesheet" href="/app/styles/app.css?v=9" />

  <script>
    window.__PUBLIC_CFG__ = {
      GMAPS_KEY: "AIzaSyDN6B8izVVhi9CGiO-_TXdhquQAE_i5Lts",
      MAP_ID:    "b2ff3b1036f246da10cb0dea",
      STRIPE_PK: "pk_test_51Rr9g0LxdVPME4zrpMHQ6iMQfdhpgwwb4EeluF5zGj0yKgspPu3KPm0Zogu6WvRhWcMx7BagtJQPGqwH6PUJGpG300QcSfhJmp",
      FLIGHTCHECK_URL: "https://flightcheck-7728622851.us-west3.run.app"
    };
    window.__FLIGHTCHECK_URL = window.__PUBLIC_CFG__.FLIGHTCHECK_URL;
  </script>
</head>
<body>
  <header>
    <img class="logo" src="/images/bonanza-logo.png" alt="Bonanza Transportation">
  </header>

  <main>
    <!-- Datos del cliente -->
    <label for="fullname">Full Name</label>
    <input id="fullname" autocomplete="name" placeholder="John Doe" />

    <label for="phone">Phone Number (US)</label>
    <input id="phone" type="tel" inputmode="numeric" autocomplete="tel" placeholder="(555) 123-4567" />
    <div id="phoneHelp" class="hint"></div>

    <label for="email">Email Address</label>
    <input id="email" type="email" autocomplete="email" placeholder="you@example.com" />
    <div id="emailHelp" class="hint"></div>

    <!-- Direcciones -->
    <label for="pickup">Pick-up Address</label>
    <input id="pickup" placeholder="e.g. SLC Airport" />

    <label for="dropoff">Drop-off Address</label>
    <input id="dropoff" placeholder="e.g. Montage Deer Valley" />

    <!-- Meet & Greet (SLC) -->
    <div class="mg-card" id="meetGreetCard" aria-label="Meet & Greet options" style="display:none">
      <h3>Meet & Greet — SLC Only</h3>
      <p>Choose where you want your driver to meet you inside the terminal.</p>
      <div class="mg-options" role="group" aria-label="Meet & Greet selection">
        <div class="mg-btn" data-choice="tsa_exit" aria-pressed="false">TSA Exit (+$50)</div>
        <div class="mg-btn" data-choice="baggage_claim" aria-pressed="false">Baggage Claim (+$50)</div>
        <div class="mg-btn active" data-choice="none" aria-pressed="true">No Meet & Greet</div>
      </div>
      <div class="mg-note">
        Available only for SUV arrivals at Salt Lake City International (SLC). Vans must use curbside pickup.
      </div>
    </div>

    <!-- Flight / Tail -->
    <div class="flight-box" id="flightBox" style="display:none">
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:6px">
        <strong id="flightTitle" style="color:#ffdeb3">Flight Details</strong>
        <span id="flightBadge" class="badge">Commercial</span>
      </div>
      <div id="flightExplain" class="muted"></div>

      <!-- Commercial / JSX -->
      <div id="flightCommercial" class="flight-grid" style="display:none">
        <div class="field-col">
          <label for="flightNumber">Flight Number</label>
          <input id="flightNumber" placeholder="e.g. DL1234" autocomplete="off" />
        </div>
        <div class="field-col">
          <label for="flightOrigin">Origin City</label>
          <input id="flightOrigin" placeholder="e.g. Los Angeles (LAX)" autocomplete="off" />
        </div>
      </div>

      <!-- Private / FBO / Municipales -->
      <div id="flightPrivate" class="flight-grid" style="display:none">
        <div class="field-col">
          <label for="tailNumber">Tail Number</label>
          <input id="tailNumber" placeholder="e.g. N123AB" autocomplete="off" />
          <div class="hint" id="tailHint" aria-hidden="true"></div>
        </div>
        <div class="field-col">
          <label for="fboCity">City (Origin or Destination)</label>
          <input id="fboCity" placeholder="e.g. Burbank (BUR) or Denver (DEN)" autocomplete="off" />
        </div>
      </div>

      <div id="flightHint" class="hint" style="margin-top:6px"></div>
    </div>

    <!-- Notas -->
    <label for="specialInstructions">Special Instructions</label>
    <textarea id="specialInstructions" placeholder="Gate code, luggage, pickup location…"></textarea>

    <!-- Mapa -->
    <div id="map" style="opacity:0; transition:opacity .15s ease"></div>

    <!-- Fecha/Hora -->
    <div class="grid2" style="margin-top:10px">
      <div>
        <label for="date">Date</label>
        <input id="date" type="date" />
      </div>
      <div>
        <label for="time">Time</label>
        <input id="time" type="time" step="900" />
      </div>
    </div>

    <!-- Selector de vehículo -->
    <div class="veh-toggle">
      <button class="veh-btn active" data-type="suv">SUV (1–5 Passengers)</button>
      <button class="veh-btn" data-type="van">Van (up to 12 Passengers)</button>
    </div>

    <!-- Visual del vehículo -->
    <div id="vehTurntable" class="turntable">
      <img id="vehImg" class="car" src="/images/suburban.png" alt="Selected Vehicle">
      <div class="platform"></div>
      <div id="vehCap" class="vehicle-caption">SUV — Max 5 passengers, 5 suitcases</div>
    </div>

   <!-- Acordeón equipaje -->
<div class="luggage-accordion" id="luggageAccordion">
  <div class="luggage-summary" id="luggageToggle" role="button" tabindex="0" aria-controls="luggagePanel" aria-expanded="false">
    <span class="luggage-title">Luggage Guidelines</span>
    <span class="luggage-chev"></span>
  </div>

  <div class="luggage-body" id="luggagePanel">
    <div class="lugg-policy">

      <!-- SUV -->
      <div class="lugg-card">
        <div class="lugg-head">
          <h4 class="lugg-title">SUV — Typical Capacity</h4>
        </div>
        <div class="lugg-grid">
          <div class="lugg-opt">
            <div class="lugg-opt-title">Standard fit</div>
            <ul class="lugg-list">
              <li>Up to 5 passengers</li>
              <li>4 large suitcases <em>or</em> 5 carry-ons</li>
              <li>+ small backpacks/hand bags</li>
            </ul>
          </div>
          <div class="lugg-opt">
            <div class="lugg-opt-title">Long items</div>
            <ul class="lugg-list">
              <li>Skis/snowboards: cuentan como 1 pieza larga</li>
              <li>Strollers: plegados, ocupan espacio de 1 maleta</li>
              <li>Golf bags: 1 por maleta grande</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Van -->
      <div class="lugg-card">
        <div class="lugg-head">
          <h4 class="lugg-title">Van — Typical Capacity</h4>
        </div>
        <div class="lugg-grid">
          <div class="lugg-opt">
            <div class="lugg-opt-title">Standard fit</div>
            <ul class="lugg-list">
              <li>Up to 12 passengers</li>
              <li>8–10 large suitcases <em>o</em> 12+ carry-ons</li>
              <li>Espacio variable según configuración de asientos</li>
            </ul>
          </div>
          <div class="lugg-opt">
            <div class="lugg-opt-title">Notas</div>
            <ul class="lugg-list">
              <li>Si llevas muchas piezas largas, avísanos en “Special Instructions”.</li>
              <li>Equipaje extra puede requerir vehículo adicional.</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Tips generales -->
      <div class="lugg-card">
        <div class="lugg-head">
          <h4 class="lugg-title">Tips</h4>
        </div>
        <div class="lugg-grid">
          <div class="lugg-opt">
            <div class="lugg-opt-title">Para agilizar</div>
            <ul class="lugg-list">
              <li>Indica número de maletas y piezas largas al reservar.</li>
              <li>Usa maletas “stackables” cuando sea posible.</li>
            </ul>
          </div>
          <div class="lugg-opt">
            <div class="lugg-opt-title">Piezas especiales</div>
            <ul class="lugg-list">
              <li>Instrumentos/arte: indícalo para traer mantas o anclajes.</li>
              <li>Fragile: márcalo y colócalo de último.</li>
            </ul>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

    <!-- Terms (SOLO texto y enlace, sin switch) -->
    <div class="terms-box" id="termsBox">
      <div class="terms-summary" aria-label="Terms and Conditions">
        <div class="accept-label">
          By booking, you agree to the
          <a class="terms-link" href="/terms.html" target="_blank" rel="noopener">Terms &amp; Conditions</a>.
        </div>
      </div>
    </div>

    <!-- Acciones -->
    <button id="calculate">Calculate Price</button>

    <!-- Resumen (PAY NOW se inyecta aquí) -->
    <div id="info" role="region" aria-live="polite" aria-label="Trip Summary"></div>
  </main>

  <!-- ====== Scripts de la app ====== -->
  <script src="/app/scripts/validators.js" defer></script>
  <script src="/app/scripts/core.js" defer></script>
  <script src="/app/scripts/booking.js" defer></script>

  <!-- ====== Google Maps ====== -->
  <script src="/app/scripts/maps-loader.js"></script>
  <script src="/app/scripts/maps.js"></script>
  <script>
  (function(){
    const SUV_IMG="/images/suburban.png", VAN_IMG="/images/van-sprinter.png";
    window.__vehicleType=window.__vehicleType||"suv";
    const btns=document.querySelectorAll(".veh-btn");
    const img=document.getElementById("vehImg");
    const cap=document.getElementById("vehCap");

    function applyVisual(){
      if(!img||!cap) return;
      if(window.__vehicleType==="van"){ img.src=VAN_IMG; cap.textContent="Van — Up to 12 passengers (luggage varies)"; }
      else { img.src=SUV_IMG; cap.textContent="SUV — Max 5 passengers, 5 suitcases"; }
    }
    function setActive(t){
      window.__vehicleType=(t==="van")?"van":"suv";
      btns.forEach(b=>b.classList.toggle("active", b.dataset.type===window.__vehicleType));
      applyVisual();
      if(typeof window.recalcFromCache==="function") window.recalcFromCache();
    }
    btns.forEach(b=>b.addEventListener("click",()=>setActive(b.dataset.type||"suv")));
    setActive(window.__vehicleType);

    // ---- Acordeón equipaje (con ARIA y teclado) ----
    const acc  = document.getElementById("luggageAccordion");
    const tog  = document.getElementById("luggageToggle");
    const panel= document.getElementById("luggagePanel");
    function setOpen(on){
      acc.classList.toggle("open", !!on);
      tog.setAttribute("aria-expanded", on ? "true" : "false");
    }
    function toggle(){ setOpen(tog.getAttribute("aria-expanded")!=="true"); }
    tog?.addEventListener("click", toggle);
    tog?.addEventListener("keydown", (e)=>{
      if(e.key===" "||e.key==="Enter"){ e.preventDefault(); toggle(); }
      if(e.key==="ArrowDown" && acc.classList.contains("open")) panel?.focus?.();
    });
    // empieza cerrado
    setOpen(false);
  })();
</script>
</body>
</html>
