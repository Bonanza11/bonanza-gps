<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bonanza Transportation</title>
  <link rel="icon" href="/images/bonanza-logo.png" />
  <meta name="color-scheme" content="dark" />
  <meta name="theme-color" content="#b66a2c" />

  <!-- Rutas absolutas -->
  <link rel="stylesheet" href="/app/styles/app.css" />
</head>
<body>
  <header>
    <img class="logo" src="/images/bonanza-logo.png" alt="Bonanza Transportation">
  </header>

  <main>
    <!-- Datos del cliente -->
    <label for="fullname">Full Name</label>
    <input id="fullname" autocomplete="name" placeholder="John Doe" />

    <label for="phone">Phone Number (US)</label>
    <input id="phone" type="tel" inputmode="numeric" autocomplete="tel" placeholder="(555) 123-4567" />
    <div id="phoneHelp" class="hint"></div>

    <label for="email">Email Address</label>
    <input id="email" type="email" autocomplete="email" placeholder="you@example.com" />
    <div id="emailHelp" class="hint"></div>

    <!-- Direcciones -->
    <label for="pickup">Pick-up Address</label>
    <input id="pickup" placeholder="e.g. SLC Airport" />

    <label for="dropoff">Drop-off Address</label>
    <input id="dropoff" placeholder="e.g. Montage Deer Valley" />

    <!-- Meet & Greet (SLC) -->
    <div class="mg-card" id="meetGreetCard" aria-label="Meet & Greet options">
      <h3>Meet & Greet — SLC Only</h3>
      <p>Choose where you want your driver to meet you inside the terminal.</p>
      <div class="mg-options" role="group" aria-label="Meet & Greet selection">
        <div class="mg-btn" data-choice="tsa_exit" aria-pressed="false">TSA Exit (+$50)</div>
        <div class="mg-btn" data-choice="baggage_claim" aria-pressed="false">Baggage Claim (+$50)</div>
        <div class="mg-btn active" data-choice="none" aria-pressed="true">No Meet & Greet</div>
      </div>
      <div class="mg-note">Available only for SUV arrivals at Salt Lake City International (SLC). Vans must use the designated curbside pickup area.</div>
    </div>

    <!-- Notas -->
    <label for="specialInstructions">Special Instructions</label>
    <textarea id="specialInstructions" placeholder="Gate code, luggage, pickup location…"></textarea>

    <!-- Fecha/Hora -->
    <div class="grid2" style="margin-top:10px">
      <div>
        <label for="date">Date</label>
        <input id="date" type="date" />
      </div>
      <div>
        <label for="time">Time</label>
        <input id="time" type="time" step="900" />
      </div>
    </div>

    <!-- Selector de vehículo -->
    <div class="veh-toggle">
      <button class="veh-btn active" data-type="suv">SUV (1–5 Passengers)</button>
      <button class="veh-btn" data-type="van">Van (up to 12 Passengers)</button>
    </div>

    <!-- Visual -->
    <div id="vehTurntable" class="turntable">
      <img id="vehImg" class="car" src="/images/suburban.png" alt="Selected Vehicle">
      <div class="platform"></div>
      <div id="vehCap" class="vehicle-caption">SUV — Max 5 passengers, 5 suitcases</div>
    </div>

    <!-- Acordeón equipaje -->
    <div class="luggage-accordion" id="luggageAccordion">
      <div class="luggage-summary">
        <span class="luggage-title">Luggage Guidelines</span>
        <span class="luggage-chev"></span>
      </div>
      <div class="luggage-body">
        <div class="lug-section">
          <h4>SUV – 1 to 5 Passengers</h4>
          <h5>Option 1 – With Sports Equipment</h5>
          <ul>
            <li>5 sports equipment items (ski bags or golf bags)</li>
            <li>3 large suitcases (28–32”)</li>
            <li>3 small suitcases (20–24”)</li>
          </ul>
          <h5>Option 2 – Without Sports Equipment</h5>
          <ul>
            <li>4 large suitcases (28–32”)</li>
            <li>4 small suitcases (20–24”)</li>
          </ul>
        </div>
        <div class="lug-section">
          <h4>Van – Up to 12 Passengers</h4>
          <h5>Option 1 – With Sports Equipment</h5>
          <ul>
            <li>8 sports equipment items</li>
            <li>8 large suitcases (28–32”)</li>
            <li>Carry-on: 1 per passenger</li>
          </ul>
          <h5>Option 2 – Without Sports Equipment</h5>
          <ul>
            <li>12–14 large suitcases (28–32”)</li>
            <li>Carry-on: 1 per passenger</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Terms / Accept switch -->
    <div class="terms-box" id="termsBox">
      <div class="terms-summary">
        <div class="accept-pill" id="acceptPill" tabindex="0" role="switch" aria-checked="false">
          <div class="accept-dot"></div>
        </div>
        <div class="accept-label">
          I accept the <a class="terms-link" href="/terms.html" target="_blank" rel="noopener">Terms &amp; Conditions</a>
        </div>
      </div>
    </div>

    <!-- Acciones -->
    <button id="calculate" disabled>Calculate Price</button>
    <div id="map"></div>
    <button id="pay" disabled style="display:none">PAY NOW</button>

    <!-- Resumen del viaje -->
    <div id="info"></div>
  </main>

  <!-- ====== Scripts (ORDEN OBLIGATORIO) ====== -->
  <script src="/app/scripts/validators.js"></script>
  <script src="/app/scripts/core.js"></script>
  <script src="/app/scripts/booking.js"></script>
  <script src="/app/scripts/maps.js"></script>
  <script src="https://js.stripe.com/v3"></script>
  <script>window.STRIPE_PK="pk_test_xxxxxxxxxxxxxxxxxxxxxxxxx";</script>
  <script src="/app/scripts/stripe.js"></script>

  <!-- Visual del vehículo -->
  <script>
    (function vehicleVisualInline(){
      const SUV_IMG = "/images/suburban.png", VAN_IMG = "/images/van-sprinter.png";
      window.__vehicleType = window.__vehicleType || "suv";
      const btns = document.querySelectorAll('.veh-btn');
      const img  = document.getElementById('vehImg');
      const cap  = document.getElementById('vehCap');

      function applyVisual(){
        if(!img||!cap) return;
        if(window.__vehicleType==='van'){ img.src=VAN_IMG; cap.textContent="Van — Up to 12 passengers (luggage varies)"; }
        else{ img.src=SUV_IMG; cap.textContent="SUV — Max 5 passengers, 5 suitcases"; }
      }
      function setActive(t){
        window.__vehicleType=(t==='van')?'van':'suv';
        btns.forEach(b=>b.classList.toggle('active', b.dataset.type===window.__vehicleType));
        applyVisual();
        if(typeof window.recalcFromCache==='function') window.recalcFromCache();
      }
      btns.forEach(b=>b.addEventListener('click',()=>setActive(b.dataset.type||'suv')));
      if(img){ img.onerror=()=>{ img.removeAttribute('src'); img.alt=window.__vehicleType.toUpperCase();
        img.style.width='120px'; img.style.height='80px'; img.style.background='#1a1a1a'; img.style.border='1px solid #444'; img.style.borderRadius='8px';};}
      setActive(window.__vehicleType);
    })();

    // Acordeón equipaje
    (function(){
      const acc=document.getElementById('luggageAccordion');
      const sum=acc?.querySelector('.luggage-summary');
      sum?.addEventListener('click',()=>acc.classList.toggle('open'));
    })();
  </script>

  <!-- Google Maps (con Places) -->
  <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDN6B8izVVhi9CGiO-_TXdhquQAE_i5Lts&libraries=places&callback=initMap">
  </script>
</body>
</html>
