<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reschedule — Bonanza Transportation</title>

  <!-- CSS global -->
  <link rel="stylesheet" href="/app/styles/app.css"/>
</head>
<body>
  <main class="container">
    <div class="card card--with-badge">
      <div class="brand-badge" aria-hidden="true"></div>

      <!-- Acción superior -->
      <div class="bar-actions">
        <button id="backBtn" type="button" class="btn-inline btn-back">Back to Booking</button>
      </div>

      <h1 class="page-title">Reschedule Reservation</h1>

      <!-- Top: CN + Load -->
      <div class="toprow">
        <div class="box">
          <label for="cn">Reservation Code (CN)</label>
          <input id="cn" placeholder="BZ-2025MMDD-XXXX" autocomplete="off" />
        </div>
        <button id="load">Load</button>
      </div>

      <div id="status" class="status"></div>

      <div class="grid-main">
        <!-- ORIGINAL TRIP -->
        <section id="original" class="orig hidden" aria-live="polite">
          <div class="head">
            <div>
              <div class="label">Reservation</div>
              <div class="value" id="o_cn">—</div>
            </div>
            <div style="text-align:right">
              <div class="label">Status</div>
              <div class="value" id="o_status">—</div>
            </div>
          </div>

          <div class="grid2" style="margin-top:8px">
            <div>
              <div class="label">Passenger</div>
              <div class="value" id="o_name">—</div>
            </div>
            <div>
              <div class="label">Email / Phone</div>
              <div class="value" id="o_contact">—</div>
            </div>
          </div>

          <div class="divider"></div>

          <div class="grid2">
            <div>
              <div class="label">Pickup</div>
              <div class="value" id="o_pickup">—</div>
            </div>
            <div>
              <div class="label">Dropoff</div>
              <div class="value" id="o_dropoff">—</div>
            </div>
          </div>

          <div class="grid3" style="margin-top:8px">
            <div><div class="label">Date</div><div class="value" id="o_date">—</div></div>
            <div><div class="label">Time</div><div class="value" id="o_time">—</div></div>
            <div><div class="label">Vehicle</div><div class="value" id="o_vehicle">—</div></div>
          </div>

          <div class="grid3" style="margin-top:8px">
            <div><div class="label">Meet & Greet</div><div class="value" id="o_mg">—</div></div>
            <div><div class="label">Distance</div><div class="value" id="o_miles">—</div></div>
            <div><div class="label">Original Total</div><div class="value" id="o_total">—</div></div>
          </div>
        </section>

        <!-- NUEVO VIAJE -->
        <section id="form" class="hidden">
          <h2 class="section-title">Trip Details</h2>

          <label for="pickup">Pickup Location</label>
          <input id="pickup" placeholder="e.g. SLC Airport / Address"/>

          <!-- Campos de vuelo -->
          <div id="flightFields" class="hidden">
            <div class="stack">
              <div style="flex:1">
                <label for="flightNumber">Flight Number (SLC)</label>
                <input id="flightNumber" placeholder="e.g. DL1234"/>
              </div>
              <div style="flex:1">
                <label for="flightOrigin">Origin City</label>
                <input id="flightOrigin" placeholder="e.g. Miami (MIA)"/>
              </div>
            </div>
          </div>

          <label for="dropoff" style="margin-top:6px;">Dropoff Location</label>
          <input id="dropoff" placeholder="e.g. Montage Deer Valley"/>
          <div id="map" aria-label="Route map"></div>

          <h2 class="section-title">Vehicle</h2>
          <div id="vehBar" class="pillbar">
            <div class="pill" data-type="suv">SUV (1–5)</div>
            <div class="pill" data-type="van">Van (up to 12)</div>
          </div>

          <h2 class="section-title">Meet &amp; Greet (SLC)</h2>
          <div id="mgBar" class="pillbar" aria-live="polite">
            <div class="pill" data-mg="tsa_exit">TSA Exit (+$50)</div>
            <div class="pill" data-mg="baggage_claim">Baggage Claim (+$50)</div>
            <div class="pill" data-mg="none">No Meet & Greet</div>
          </div>

          <h2 class="section-title">Pickup Time</h2>
          <div class="stack">
            <input id="date" type="date" aria-label="Pickup date"/>
            <input id="time" type="time" step="900" aria-label="Pickup time"/>
          </div>

          <div class="stack" style="margin-top:8px">
            <button id="recalc" class="btn">Recalculate Price</button>
            <button id="reset" class="btn ghost">Reset changes</button>
          </div>

          <div id="summary" class="summaryBox hidden">
            <div class="grid2">
              <div><span class="label">Pickup</span><div class="value" id="n_pickup">—</div></div>
              <div><span class="label">Dropoff</span><div class="value" id="n_dropoff">—</div></div>
            </div>
            <div class="grid3" style="margin-top:8px">
              <div><span class="label">Date</span><div class="value" id="n_date">—</div></div>
              <div><span class="label">Time</span><div class="value" id="n_time">—</div></div>
              <div><span class="label">Vehicle / M&G</span><div class="value" id="n_vehicle_mg">—</div></div>
            </div>
            <div class="grid3" style="margin-top:8px">
              <div><span class="label">Distance</span><div class="value" id="n_miles">—</div></div>
              <div><span class="label">New Quote</span><div class="value" id="newQuote">$0.00</div></div>
              <div><span class="label">Difference</span><div class="value" id="diff">$0.00</div></div>
            </div>
            <p id="note" class="muted"></p>
            <button id="submit" class="btn" style="width:100%;">Submit Reschedule</button>
          </div>
        </section>
      </div>
    </div>
  </main>

  <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>

  <!-- Script de comportamiento -->
  <script src="/app/scripts/reschedule.js"></script>
</body>
</html>
