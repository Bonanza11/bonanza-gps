<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Bonanza Transportation — Book Your Ride</title>
  <meta name="color-scheme" content="dark">

  <!-- Favicon / Brand -->
  <link rel="icon" href="/images/bonanza-logo.png" />

  <!-- Styles -->
  <link rel="stylesheet" href="./styles/app.css" />

  <!-- OpenGraph (opcional) -->
  <meta property="og:title" content="Bonanza Transportation — Book Your Ride" />
  <meta property="og:image" content="/images/suburban.png" />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#b66a2c" />
</head>
<body>
  <!-- ===== HERO ===== -->
  <header class="hero" role="banner" aria-label="Bonanza hero">
    <div class="hero__topbar">
      <div class="brand">Bonanza Transportation</div>
      <img class="hero__logo" src="/images/bonanza-logo.png" alt="Bonanza logo" />
    </div>

    <div class="hero__cta">
      <a href="#booking" class="btn btn--primary">Book Now</a>
    </div>

    <div class="hero__footer" aria-label="Highlights">
      <div class="card">
        <h3>Amenities</h3>
        <p>Water, chargers, car seats on request, quiet ride.</p>
      </div>
      <div class="card">
        <h3>Dependable Service</h3>
        <p>On-time pickups in Summit & Wasatch. Professional drivers.</p>
      </div>
      <div class="card">
        <h3>Our CEO</h3>
        <p>“Mr. Bonanza” — committed to a 5-star experience.</p>
      </div>
    </div>
  </header>

  <!-- ===== BOOKING ===== -->
  <main id="booking" class="container" role="main">
    <h1 class="sr-only">Bonanza Transportation Reservation</h1>
    <h2>Reserve your ride</h2>

    <form id="bookingForm" novalidate autocomplete="off">
      <!-- Datos del pasajero -->
      <section aria-labelledby="sec-passenger">
        <h3 id="sec-passenger" class="sr-only">Passenger details</h3>
        <div class="grid">
          <label class="vld">
            Full Name
            <input type="text" id="name" name="name" required />
            <span class="mark" aria-hidden="true"></span>
          </label>

          <label class="vld">
            Email
            <input type="email" id="email" name="email" required />
            <span class="mark" aria-hidden="true"></span>
          </label>

          <label class="vld">
            Phone
            <input
              type="tel"
              id="phone"
              name="phone"
              inputmode="tel"
              placeholder="+1 (___) ___-____"
              required />
            <span class="mark" aria-hidden="true"></span>
          </label>

          <label class="vld">
            Pick-up date & time (min 24h)
            <input type="datetime-local" id="pickupAt" name="pickupAt" required />
            <span class="mark" aria-hidden="true"></span>
          </label>
        </div>
      </section>

      <!-- Selección de vehículo -->
      <section aria-labelledby="sec-vehicle" class="vehicle-select">
        <h3 id="sec-vehicle" class="sr-only">Vehicle selection</h3>

        <button type="button" class="veh-card selected" data-veh="SUV" aria-pressed="true">
          <img src="/images/suburban.png" alt="SUV Suburban" />
          <div class="veh-name">SUV (Suburban)</div>
        </button>

        <button type="button" class="veh-card" data-veh="Van" aria-pressed="false">
          <img src="/images/van-sprinter.png" alt="Van Sprinter" />
          <div class="veh-name">Van (Sprinter)</div>
        </button>

        <input type="hidden" id="vehicle" name="vehicle" value="SUV" />
      </section>

      <!-- Origen / Destino / Pax -->
      <section aria-labelledby="sec-route">
        <h3 id="sec-route" class="sr-only">Route</h3>
        <div class="grid">
          <label class="vld">
            From
            <input
              type="text"
              id="from"
              name="from"
              placeholder="Start typing address…"
              required />
            <span class="mark" aria-hidden="true"></span>
          </label>

          <label class="vld">
            To
            <input
              type="text"
              id="to"
              name="to"
              placeholder="Start typing address…"
              required />
            <span class="mark" aria-hidden="true"></span>
          </label>

          <label>
            Passengers
            <select id="pax" name="pax" aria-label="Passengers">
              <option>1</option><option>2</option><option>3</option><option>4</option>
              <option>5</option><option>6</option><option>7</option><option>8</option>
            </select>
          </label>
        </div>
      </section>

      <!-- Aeropuertos / Meet&Greet -->
      <details id="airportPanel" class="airport hidden">
        <summary>Airport options (SLC & Utah FBOs)</summary>
        <div class="grid">
          <label>
            Flight Number
            <input type="text" id="flightNumber" name="flightNumber" placeholder="e.g., DL1234" />
          </label>

          <label>
            Airline / FBO
            <input type="text" id="airline" name="airline" placeholder="Delta / TAC Air / Atlantic, etc." />
          </label>

          <label class="meet">
            <input type="checkbox" id="meetGreet" name="meetGreet" />
            <span>Meet &amp; Greet at SLC (+$50)</span>
          </label>
        </div>
      </details>

      <!-- Mapa -->
      <div id="map" role="region" aria-label="Route map"></div>

      <!-- Acciones -->
      <div class="actions">
        <button type="button" id="btnQuote" class="btn">Calculate Price</button>
        <button type="button" id="btnPay" class="btn btn--primary" disabled>PAY NOW</button>
      </div>

      <!-- Resumen -->
      <section id="summary" class="summary hidden" aria-live="polite" aria-atomic="true">
        <h3>Trip summary</h3>
        <ul>
          <li><strong>Distance:</strong> <span id="sumDistance">–</span></li>
          <li><strong>Duration:</strong> <span id="sumDuration">–</span></li>
          <li><strong>After-hours (25%):</strong> <span id="sumAfter">–</span></li>
          <li><strong>County surcharge:</strong> $<span id="sumCounty">0</span></li>
          <li><strong>Meet &amp; Greet:</strong> $<span id="sumMeet">0</span></li>
          <li class="price"><strong>Total Price:</strong> $<span id="sumPrice">–</span></li>
        </ul>
      </section>

      <!-- Terms -->
      <p class="tnc">
        <label>
          <input type="checkbox" id="agree" name="agree" />
          I agree to Bonanza’s Terms &amp; Conditions.
        </label>
        <a href="#" id="openTnc" aria-haspopup="dialog">View Terms</a>
      </p>
    </form>
  </main>

  <!-- ===== Terms Modal ===== -->
  <dialog id="tncModal" aria-labelledby="tncTitle">
    <h3 id="tncTitle">Bonanza Transportation — Terms &amp; Conditions</h3>
    <div class="scroll">
      <p>• Minimum booking window: 24 hours in advance.</p>
      <p>• After-hours rides (10:00 PM – 5:59 AM) add 25%.</p>
      <p>• Meet &amp; Greet at SLC is optional (+$50).</p>
      <p>• County rule: if pick-up is outside Summit/Wasatch, surcharge is $3 per mile (in addition to base/after-hours/meet&greet).</p>
      <p>• No-shows and late cancellations may incur fees.</p>
    </div>
    <div class="dlg-actions">
      <button id="closeTnc" class="btn">Close</button>
    </div>
  </dialog>

  <!-- ===== JS: Config + Lógica ===== -->
  <!-- 1) Config (reglas: home base, after-hours 25%, meet&greet $50, $3/mi fuera Summit/Wasatch) -->
  <script src="./scripts/config.js"></script>

  <!-- 2) Mapa + Places + cálculo de ruta (setea window.__pickupCounty y window.__lastRoute) -->
  <script src="./scripts/maps.js"></script>

  <!-- 3) Booking (validaciones, 24h, cálculo total, AM/PM, resumen) -->
  <script src="./scripts/booking.js"></script>

  <!-- 4) Stripe (abre Checkout con el total calculado) -->
  <script src="./scripts/stripe.js"></script>

  <!-- Google Maps (reemplaza con tu key real) -->
  <script
    src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places&callback=initMap"
    async defer></script>

  <!-- Accesibilidad utilitaria (opcional, para el modal T&C) -->
  <script>
    (function () {
      const dlg = document.getElementById('tncModal');
      const open = document.getElementById('openTnc');
      const close = document.getElementById('closeTnc');
      if (!dlg || !open || !close) return;
      open.addEventListener('click', (e) => { e.preventDefault(); dlg.showModal(); });
      close.addEventListener('click', () => dlg.close());
    })();
  </script>
</body>
</html>
