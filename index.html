<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bonanza Transportation</title>
<style>
  /* Reset básico */
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:#000;color:#c08b5c;font-family:Arial,sans-serif}

  /* Header con logo circular + glow cobre/neón */
  header{display:flex;justify-content:center;align-items:center;padding:26px 16px;position:relative}
  header .logo{
    width:160px;height:160px;border-radius:50%;
    border:3px solid #c08b5c;object-fit:cover;display:block;position:relative;
    box-shadow:
      0 0 0 3px rgba(192,139,92,.35) inset,     /* aro interior cobre */
      0 8px 22px rgba(0,0,0,.6),                /* sombra realista */
      0 0 30px rgba(192,139,92,.35);            /* glow suave externo */
    filter: drop-shadow(0 0 18px rgba(192,139,92,.45)); /* halo adicional */
  }
  /* anillo de neón más marcado */
  header .logo-wrap{position:relative}
  header .logo-wrap::after{
    content:"";position:absolute;inset:-10px;border-radius:50%;
    box-shadow:0 0 28px 12px rgba(192,139,92,.35);
    pointer-events:none;
  }
  /* Contenedor principal */
  main{
    max-width: 760px;        /* ancho cómodo en desktop */
    width: 92vw;             /* respeta móviles */
    margin: 0 auto 48px;
    padding: 0 16px;
  }

  /* Campos: uno debajo del otro, con aire */
  label{
    display:block;
    margin:12px 0 6px;
    font-weight:700;
  }
  input{
    display:block;           /* fuerza bloque para que no se apilen en fila */
    width:100%;
    height:44px;
    padding:10px 12px;
    background:#1a1a1a;
    color:#c08b5c;
    border:1px solid #444;
    border-radius:8px;
  }

  /* Botones */
  button{
    width:100%;
    padding:14px 16px;
    margin-top:18px;
    background:#c08b5c;color:#000;font-weight:700;font-size:18px;
    border:0;border-radius:10px;cursor:pointer;
    animation:pulse 1.8s infinite;
  }
  @keyframes pulse{
    0%{transform:scale(1); box-shadow:0 0 0 0 rgba(192,139,92,.7)}
    70%{transform:scale(1.04); box-shadow:0 0 0 12px rgba(192,139,92,0)}
    100%{transform:scale(1); box-shadow:0 0 0 0 rgba(192,139,92,0)}
  }

  /* Mapa y panel de info */
  #map{
    height:420px;            /* más alto, mejor lectura */
    margin-top:20px;
    border-radius:12px;
    overflow:hidden;
  }
  #info{
    background:#111;
    padding:14px;
    border-radius:12px;
    margin-top:18px;
    font-size:.95em;
  }
  #info div{margin-bottom:8px}

  /* Footer imagen (si la usas) */
  footer img{width:100%;margin-top:24px;border-radius:12px}

  /* Ajustes en pantallas grandes: 2 columnas para fecha/hora si quieres */
  @media (min-width:900px){
    .row-2{
      display:grid;grid-template-columns:1fr 1fr;gap:12px;align-items:end;
    }
    .row-2 > div{min-width:0}
  }
</style>

</head>
   
<body>
  <header>
    <img src="bonanza-logo.PNG" alt="Bonanza Transportation Logo"/>
  </header>

  <main>
    <label for="fullname">Full Name:</label>
    <input id="fullname" placeholder="e.g. John Doe" />

    <label for="phone">Phone Number:</label>
    <input id="phone" placeholder="e.g. +1 385 123 4567" />

    <label for="email">Email Address:</label>
    <input id="email" type="email" placeholder="e.g. your@email.com" />

    <label for="pickup">Pick-up Address:</label>
    <input id="pickup" placeholder="e.g. 13742 N Jordanelle Pkwy" />

    <label for="dropoff">Drop-off Address:</label>
    <input id="dropoff" placeholder="e.g. SLC Airport" />

    <label for="date">Date:</label>
    <input id="date" type="date" />

    <label for="time">Time:</label>
    <input id="time" type="time" />

    <button id="calculate">Calculate Price</button>

    <div id="map"></div>
    <div id="info">
      <div><b>Distance:</b> --</div>
      <div><b>Duration:</b> --</div>
      <div><b>Estimated Price:</b> $0.00</div>
      <div><b>Note:</b> Pet-Friendly Service (No Extra Charge)</div>
      <div><b>Vehicle:</b> Black Suburban – 1–5 Passengers</div>
    </div>

    <button id="pay" style="display:none;">PAY NOW</button>
  </main>

  <script>
    let map, directionsService, directionsRenderer;
    let pickupAutocomplete, dropoffAutocomplete;
    let distanceValue = 0;
    let price = 0;

    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 40.7587, lng: -111.8762 },
        zoom: 10,
      });
      directionsService = new google.maps.DirectionsService();
      directionsRenderer = new google.maps.DirectionsRenderer();
      directionsRenderer.setMap(map);

      // AUTOCOMPLETE CLÁSICO (funciona ahora, migrar en marzo 2025)
      pickupAutocomplete = new google.maps.places.Autocomplete(
        document.getElementById("pickup")
      );
      dropoffAutocomplete = new google.maps.places.Autocomplete(
        document.getElementById("dropoff")
      );
    }

    function calculatePrice(distanceMiles) {
      if (distanceMiles <= 10) return 120;
      if (distanceMiles <= 35) return 190;
      if (distanceMiles <= 39) return 210;
      if (distanceMiles <= 48) return 230;
      if (distanceMiles <= 55) return 250;
      return distanceMiles * 5.4;
    }

    document.getElementById("calculate").addEventListener("click", () => {
      const pickup = document.getElementById("pickup").value;
      const dropoff = document.getElementById("dropoff").value;
      if (!pickup || !dropoff) {
        alert("Please enter both pick-up and drop-off addresses.");
        return;
      }
      directionsService.route(
        { origin: pickup, destination: dropoff, travelMode: "DRIVING" },
        (result, status) => {
          if (status === "OK") {
            directionsRenderer.setDirections(result);
            const route = result.routes[0].legs[0];
            const distanceMiles = parseFloat(route.distance.text);
            distanceValue = distanceMiles;
            price = calculatePrice(distanceMiles);

            document.getElementById("info").innerHTML = `
              <div><b>Distance:</b> ${distanceMiles} miles</div>
              <div><b>Duration:</b> ${route.duration.text}</div>
              <div><b>Estimated Price:</b> $${price.toFixed(2)}</div>
              <div><b>Note:</b> Pet-Friendly Service (No Extra Charge)</div>
              <div><b>Vehicle:</b> Black Suburban – 1–5 Passengers</div>
              <div><b>Luggage:</b> 6 ski bags, 2 large + 3 small or 3 large + 4 small suitcases</div>
            `;
            document.getElementById("pay").style.display = "block";
          } else {
            alert("Could not calculate route: " + status);
          }
        }
      );
    });

    document.getElementById("pay").addEventListener("click", async () => {
      const response = await fetch("/api/create-checkout-session", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ price }),
      });
      const data = await response.json();
      if (data.url) {
        window.location.href = data.url;
      }
    });
  </script>
  <!-- Google Maps API -->
<script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDN6B8izVVhi9CGiO-_TXdhquQAE_i5Lts&libraries=places&callback=initMap"
  async defer>
</script>
</body>
</html>
